<?php

use ResponsiveMenu\Formatters\Tabs as Tabs;
use ResponsiveMenu\Formatters\Text as Text;
// This is horrible!
include dirname(dirname(dirname(__FILE__))) . '/config/admin_ordering.php';

$tabs = new ResponsiveMenu\ViewModels\Components\Admin\Tabs($order_mapping);
$boxes = new ResponsiveMenu\ViewModels\Components\Admin\Boxes($order_mapping, $l['options']);

?>
<div class="wrap">
  <div id="poststuff">
      <div id="postbox-container" class="postbox-container">
        <?php if(isset($l['flash']['success'])): ?>
          <div class="updated notice notice-success is-dismissible" id="message">
            <p><?php _e($l['flash']['success'], 'responsive-menu'); ?></p>
            <button class="notice-dismiss" type="button">
              <span class="screen-reader-text">
              <?php _e('Dismiss this notice', 'responsive-menu') ?>.
              </span>
            </button>
          </div> <!-- updated -->
        <?php endif; ?>
      <?php if(isset($l['flash']['errors'])): ?>
        <div class="notice notice-error is-dismissible" id="message">
          <ul>
                    <?php foreach($l['flash']['errors'] as $error): ?>
                      <li><?php _e($error, 'responsive-menu'); ?></li>
                    <?php endforeach; ?>
                    </ul>
          <button class="notice-dismiss" type="button">
            <span class="screen-reader-text">
            <?php _e('Dismiss this notice', 'responsive-menu') ?>.
            </span>
          </button>
        </div>
      <?php endif; ?>

      <div class="tabs_container">
        <?php echo $tabs->render(); ?>
      </div>

      <div class="key-container">
        <a href="https://responsive.menu/why-go-pro/">
          <div class="key key-pro"><span><?php _e('PRO', 'responsive-menu'); ?></span><?php _e('Only available in Pro version', 'responsive-menu'); ?></div>
          <div class="key key-semi-pro"><span><?php _e('SEMI PRO', 'responsive-menu'); ?></span><?php _e('Fully unlocked in Pro version', 'responsive-menu'); ?></div>
        </a>
      </div>

  		<div class="upgrade-notes">
  			<div class="upgrade-notes-title"><?php _e('Welcome to Responsive Menu 3.0', 'responsive-menu'); ?></div>
  			<div class="upgrade-notes-content">
          <?php _e(sprintf('As this is a brand new version, there are over 14,000 combinations of options so squashing bugs is not an easy task and some may still exist. Therefore, please report any bugs to us %shere%s and we will deal with them quickly.%s
          For an upgrade guide, please check out %sthis page%s.', '<a href="https://responsive.menu/contact/" target="_blank">', '</a>', '<br /><br />', '<a href="https://responsive.menu/upgrading-from-version-2-to-version-3" target="_blank">', '</a>'), 'responsive-menu'); ?>
        </div>
        <div class="upgrade-notes-close">x</div>
  		</div>

      <div id="all_options_container">
        <div class="meta-box-sortables ui-sortable" id="normal-sortables">
        	<form action="" method="post" enctype="multipart/form-data" id="responsive_menu_form">
            <input type="submit" class="button submit" name="responsive_menu_submit" value="<?php _e('Update Options', 'responsive-menu'); ?>" style="display: none;" />
            <div id="options_list_container">
              <?php echo $boxes->render(); ?>
            </div>
        		<input type="submit" id="responsive_menu_submit" class="button submit" name="responsive_menu_submit" value="<?php _e('Update Options', 'responsive-menu') ?>" />
        	</form>
        </div> <!-- #normal-sortables -->
      </div><!--#all_options_container
   --><div id="banner_area">

       <div class="postbox " id="submitdiv">
         <h2 class="hndle ui-sortable-handle"><span>Preview</span></h2>
         <div class="inside">
           <div id="submitpost" class="submitbox">
             <div id="minor-publishing-actions">
                 <div id="delete-action">
                   <a href="https://responsive.menu/why-go-pro/" target="_blank" class="submitdelete deletion"><?php _e('Upgrade Now', 'responsive-menu'); ?></a>
                 </div>
                 <input type="submit" class="button preview" id="responsive_menu_preview" name="responsive_menu_preview" value="<?php _e('Preview Changes', 'responsive-menu'); ?>" />
                 <br /><br />
             </div>
           </div>
         </div>
       </div>

       <div id="upgrade_banner">
            <div id="upgrade_banner_title"><?php _e('Upgrade today to unlock the following features:', 'responsive-menu'); ?></div>
            <ul>
              <li><i class="fa fa-check"></i><?php _e('Font Awesome Icon Support', 'responsive-menu'); ?></li>
              <li><i class="fa fa-check"></i><?php _e('Opacity Option for all Colours', 'responsive-menu'); ?></li>
              <li><i class="fa fa-check"></i><?php _e('15+ Button Animations', 'responsive-menu'); ?></li>
              <li><i class="fa fa-check"></i><?php _e('Main Desktop Menu Styling', 'responsive-menu'); ?></li>
              <li><i class="fa fa-check"></i><?php _e('Add and configure a Header Bar', 'responsive-menu'); ?></li>
              <li><i class="fa fa-check"></i><?php _e('Preview Changes', 'responsive-menu'); ?></li>
              <li><?php _e('And much more', 'responsive-menu'); ?></li>
            </ul>
            <a target="_blank" href="https://responsive.menu/why-go-pro" class="button"><?php _e('Upgrade Now', 'responsive-menu'); ?></a>
          </div>
          <div id="docs_banner">
            <?php _e('Confused? Check out our documentation', 'responsive-menu'); ?>
            <a target="_blank" href="https://responsive.menu/docs" class="button"><?php _e('View Docs', 'responsive-menu'); ?></a>
          </div>
      </div> <!-- #banner_area -->
    </div> <!-- #postbox-container -->
  </div> <!-- #poststuff -->
</div> <!-- #wrap -->
