<div class="panel panel-default">
    <div class="panel-body">Here you can turn options on or off and re-arrange them accordingly.</div>
    <table class="table table-bordered table-hover">
        <tr>
            <td class="well col-md-3">
                <label for="items_order" class="control-label">Order of Menu Items</label>
                <div class="sub-text">Drag the items to re-order and click to turn them on or off.</div>
            </td>
            <td>
                <ul id="menu-sortable">
                    {% for key, selected in options.items_order|json_decode %}
                        <li class="draggable">
                            {{ key|title }}
                            <input type="text" class="orderable-item" value="{{ selected }}" name="menu[items_order][{{ key }}]" />
                            <div class="menu-order-option-switch{% if selected == 'on' %} menu-order-option-switch-on{% endif %}"></div>
                        </li>
                    {% endfor %}
                </ul>
            </td>
        </tr>
        <tr>
            <td class="well col-md-3">
                <label for="menu_title" class="control-label">
                    Menu Title
                    <div class="sub-text">This is a description with <a href="/">link</a>. Thanks</div>
                </label>
            </td>
            <td class="semi-pro">
                <input type="text" name="menu[menu_title]" value="{{ options.menu_title }}" class="form-control" id="menu_title" placeholder="Menu Title">
            </td>
        </tr>
    </table>
</div>

<script>
    jQuery(document).ready(function($) {
        $(document).on('click', '.menu-order-option-switch', function() {
            var siblings = $(this).siblings('input.orderable-item');
            if(siblings.val() != 'on') {
                siblings.val('on');
                $(this).addClass('menu-order-option-switch-on');
            } else {
                siblings.val('');
                $(this).removeClass('menu-order-option-switch-on');
            }
        });
        $('#menu-sortable').sortable({
            revert: true
        });
        $('#sortable, .draggable').disableSelection();
    });
</script>